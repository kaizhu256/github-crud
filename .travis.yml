before_install:
  # init xvfb
  # http://docs.travis-ci.com/user/gui-and-headless-browsers/
  - "export DISPLAY=:99.0 && sh -e /etc/init.d/xvfb start"
branches:
  only:
  - alpha
  - beta
  - master
env:
  global:
  # this value is auto-generated by shAesEncryptTravis
  - secure: LbFNmdqcnMe+wkNi/TkDpVa9GRUyS3OXpKFxWOkh8Oggk2aqlb7N0e5RZSkB45Jq/v1Y+1dhGXON8lILR/6VzDJbe918FxXknhlORQ0TFqFRji/ZcZIwCNrlJOdfGHV5S1bx+UKniVFCelQtagTidYBGsDApMxGrFWEN3gCYHZk= # AES_256_KEY
  # this value is auto-generated by shAesEncryptTravis
  # - AES_ENCRYPTED_SH: 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 # AES_ENCRYPTED_SH
language:
  - node_js
node_js:
  - "0.10"
script:
  # init env
  - if [ "$TRAVIS" ]; then export GITHUB_REPO=kaizhu256/node-github-upload; fi
  - if [ "$TRAVIS" ]; then export HEROKU_REPO=hrku01-github-upload-$TRAVIS_BRANCH; fi
  - if [ "$TRAVIS" ]; then export TEST_URL="https://hrku01-github-upload-$TRAVIS_BRANCH.herokuapp.com/?modeTest=phantom"; fi
  - . node_modules/utility2/index.sh && shInit
  # test published package
  #!! - shRun shNpmTestPublished
  # test package
  - npm test
  # deploy to heroku
  - shRun shHerokuDeploy
  # upload build artifacts to github
  - shRun shBuildUploadGithub
