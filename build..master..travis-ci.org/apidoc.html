<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    overflow-wrap: break-word;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/kaizhu256/node-github-crud"

    >github-crud (2019.1.21)</a>
</h1>
<h4>this zero-dependency package will provide a simple cli-tool to PUT / GET / DELETE github files</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.github-crud">module github-crud</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.ajax">
            function <span class="apidocSignatureSpan">github-crud.</span>ajax
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.assertThrow">
            function <span class="apidocSignatureSpan">github-crud.</span>assertThrow
            <span class="apidocSignatureSpan">(passed, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliRun">
            function <span class="apidocSignatureSpan">github-crud.</span>cliRun
            <span class="apidocSignatureSpan">(option)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.functionOrNop">
            function <span class="apidocSignatureSpan">github-crud.</span>functionOrNop
            <span class="apidocSignatureSpan">(fnc)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudAjax">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudAjax
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudContentDelete">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentDelete
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudContentGet">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentGet
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudContentPut">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentPut
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudContentPutFile">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentPutFile
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudContentTouch">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentTouch
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudContentTouchList">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentTouchList
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudRepoCreate">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoCreate
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudRepoCreateList">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoCreateList
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudRepoDelete">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoDelete
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.githubCrudRepoDeleteList">
            function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoDeleteList
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.identity">
            function <span class="apidocSignatureSpan">github-crud.</span>identity
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.nop">
            function <span class="apidocSignatureSpan">github-crud.</span>nop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.objectAssignDefault">
            function <span class="apidocSignatureSpan">github-crud.</span>objectAssignDefault
            <span class="apidocSignatureSpan">(target, source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.onErrorDefault">
            function <span class="apidocSignatureSpan">github-crud.</span>onErrorDefault
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.onErrorWithStack">
            function <span class="apidocSignatureSpan">github-crud.</span>onErrorWithStack
            <span class="apidocSignatureSpan">(onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.onNext">
            function <span class="apidocSignatureSpan">github-crud.</span>onNext
            <span class="apidocSignatureSpan">(option, onError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.onParallel">
            function <span class="apidocSignatureSpan">github-crud.</span>onParallel
            <span class="apidocSignatureSpan">(onError, onEach, onRetry)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.onParallelList">
            function <span class="apidocSignatureSpan">github-crud.</span>onParallelList
            <span class="apidocSignatureSpan">(option, onEach, onError)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">github-crud.</span>timeExit</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">github-crud.</span>cliDict</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">github-crud.</span>github_crud</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">github-crud.</span>local</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">github-crud.</span>timerTimeoutAjaxProgressHide</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">github-crud.</span>__dirname</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.github-crud.cliDict">module github-crud.cliDict</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliDict.delete">
            function <span class="apidocSignatureSpan">github-crud.cliDict.</span>delete
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliDict.get">
            function <span class="apidocSignatureSpan">github-crud.cliDict.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliDict.put">
            function <span class="apidocSignatureSpan">github-crud.cliDict.</span>put
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliDict.repo_create">
            function <span class="apidocSignatureSpan">github-crud.cliDict.</span>repo_create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliDict.repo_delete">
            function <span class="apidocSignatureSpan">github-crud.cliDict.</span>repo_delete
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.github-crud.cliDict.touch">
            function <span class="apidocSignatureSpan">github-crud.cliDict.</span>touch
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.github-crud" id="apidoc.module.github-crud">module github-crud</a></h1>


    <h2>
        <a href="#apidoc.element.github-crud.ajax" id="apidoc.element.github-crud.ajax">
        function <span class="apidocSignatureSpan">github-crud.</span>ajax
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ajax = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will send an ajax-request with given &lt;option&gt;.url,
 * with error-handling and timeout
 * example usage:
    local.ajax({
        data: &quot;hello world&quot;,
        header: {&quot;x-header-hello&quot;: &quot;world&quot;},
        method: &quot;POST&quot;,
        url: &quot;/index.html&quot;
    }, function (error, xhr) {
        console.log(xhr.statusCode);
        console.log(xhr.responseText);
    });
 */
</span>    var ajaxProgressUpdate;
    var bufferValidateAndCoerce;
    var isDone;
    var local2;
    var onEvent;
    var streamCleanup;
    var timeout;
    var tmp;
    var xhr;
    var xhrInit;
    // init local2
    local2 = local.utility2 || {};
    // init function
    ajaxProgressUpdate = local2.ajaxProgressUpdate || local.nop;
    bufferValidateAndCoerce = local2.bufferValidateAndCoerce || function (
        bff,
        mode
    ) {
    /*
     * this function will validate and coerce/convert &lt;bff&gt; -&gt; Buffer
     * (or String if &lt;mode&gt; = &quot;string&quot;)
     */
        // coerce ArrayBuffer -&gt; Buffer
        if (Object.prototype.toString.call(bff) === &quot;[object ArrayBuffer]&quot;) {
            bff = new Uint8Array(bff);
        }
        // convert Buffer -&gt; utf8
        if (mode === &quot;string&quot; &amp;&amp; typeof bff !== &quot;string&quot;) {
            bff = String(bff);
        }
        return bff;
    };
    onEvent = function (event) {
    /*
     * this function will handle events
     */
        if (Object.prototype.toString.call(event) === &quot;[object Error]&quot;) {
            xhr.error = xhr.error || event;
            xhr.onEvent({
                type: &quot;error&quot;
            });
            return;
        }
        // init statusCode
        xhr.statusCode = (xhr.statusCode || xhr.status) | 0;
        switch (event.type) {
        case &quot;abort&quot;:
        case &quot;error&quot;:
        case &quot;load&quot;:
            if (isDone) {
                return;
            }
            isDone = true;
            // decrement ajaxProgressCounter
            local2.ajaxProgressCounter = Math.max(
                local2.ajaxProgressCounter - 1,
                0
            );
            ajaxProgressUpdate();
            // handle abort or error event
            switch (!xhr.error &amp;&amp; event.type) {
            case &quot;abort&quot;:
            case &quot;error&quot;:
                xhr.error = new Error(&quot;ajax - event &quot; + event.type);
                break;
            case &quot;load&quot;:
                if (xhr.statusCode &gt;= 400) {
                    xhr.error = new Error(
                        &quot;ajax - statusCode &quot; + xhr.statusCode
                    );
                }
                break;
            }
            // debug statusCode / method / url
            if (xhr.error) {
                xhr.statusCode = xhr.statusCode || 500;
                xhr.error.statusCode = xhr.statusCode;
                tmp = (
                    // ternary-condition
                    (
                        local.isBrowser
                        ? &quot;browser&quot;
                        : &quot;node&quot;
                    )
                    + &quot; - &quot; + xhr.statusCode + &quot; &quot; + xhr.method + &quot; &quot; + xhr.url
                    + &quot;\n&quot;
                );
                xhr.error.message = tmp + xhr.error.message;
                xhr.error.stack = tmp + xhr.error.stack;
            }
            // update responseHeaders
            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders
            if (xhr.getAllResponseHeaders) {
                xhr.getAllResponseHeaders().replace((
                    /(.*?):\u0020*(.*?)\r\n/g
                ), function (ignore, match1, match2) {
                    xhr.responseHeaders[match1.toLowerCase()] = match2;
                });
            }
            // debug ajaxResponse
            xh...</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/* validateLineSortedReset */
local.ajax = function (option, onError) {
/*
* this function will send an ajax-request with given &lt;option&gt;.url,
* with error-handling and timeout
* example usage:
   local.<span class="apidocCodeKeywordSpan">ajax</span>({
       data: &quot;hello world&quot;,
       header: {&quot;x-header-hello&quot;: &quot;world&quot;},
       method: &quot;POST&quot;,
       url: &quot;/index.html&quot;
   }, function (error, xhr) {
       console.log(xhr.statusCode);
       console.log(xhr.responseText);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.assertThrow" id="apidoc.element.github-crud.assertThrow">
        function <span class="apidocSignatureSpan">github-crud.</span>assertThrow
        <span class="apidocSignatureSpan">(passed, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assertThrow = function (passed, message) {
<span class="apidocCodeCommentSpan">/*
 * this function will throw error &lt;message&gt; if &lt;passed&gt; is falsy
 */
</span>    var error;
    if (passed) {
        return;
    }
    error = (
        // ternary-condition
        (
            message
            &amp;&amp; typeof message.message === &quot;string&quot;
            &amp;&amp; typeof message.stack === &quot;string&quot;
        )
        // if message is an error-object, then leave it as is
        ? message
        : new Error(
            typeof message === &quot;string&quot;
            // if message is a string, then leave it as is
            ? message
            // else JSON.stringify message
            : JSON.stringify(message, null, 4)
        )
    );
    throw error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    commandList[ii] = option.rgxComment.exec(text);
    commandList[ii] = {
        argList: (commandList[ii][1] || &quot;&quot;).trim(),
        command: [key],
        description: commandList[ii][2]
    };
} catch (ignore) {
    local.<span class="apidocCodeKeywordSpan">assertThrow</span>(null, new Error(
        &quot;cliRun - cannot parse comment in COMMAND &quot;
        + key + &quot;:\nnew RegExp(&quot;
        + JSON.stringify(option.rgxComment.source)
        + &quot;).exec(&quot; + JSON.stringify(text)
        .replace((
            /\\\\/g
        ), &quot;\u0000&quot;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.cliRun" id="apidoc.element.github-crud.cliRun">
        function <span class="apidocSignatureSpan">github-crud.</span>cliRun
        <span class="apidocSignatureSpan">(option)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cliRun = function (option) {
<span class="apidocCodeCommentSpan">/*
 * this function will run cli
 */
</span>    local.cliDict._eval = local.cliDict._eval || function () {
    /*
     * &lt;code&gt;
     * will eval &lt;code&gt;
     */
        globalThis.local = local;
        local.vm.runInThisContext(process.argv[3]);
    };
    local.cliDict[&quot;--eval&quot;] = local.cliDict[&quot;--eval&quot;] || local.cliDict._eval;
    local.cliDict[&quot;-e&quot;] = local.cliDict[&quot;-e&quot;] || local.cliDict._eval;
    local.cliDict._help = local.cliDict._help || function () {
    /*
     *
     * will print help
     */
        var commandList;
        var file;
        var packageJson;
        var text;
        var textDict;
        commandList = [{
            argList: &quot;&lt;arg2&gt;  ...&quot;,
            description: &quot;usage:&quot;,
            command: [&quot;&lt;arg1&gt;&quot;]
        }, {
            argList: &quot;&apos;console.log(\&quot;hello world\&quot;)&apos;&quot;,
            description: &quot;example:&quot;,
            command: [&quot;--eval&quot;]
        }];
        file = __filename.replace((
            /.*\//
        ), &quot;&quot;);
        option = Object.assign({}, option);
        packageJson = require(&quot;./package.json&quot;);
        // validate comment
        option.rgxComment = option.rgxComment || (
            /\)\u0020\{\n(?:|\u0020{4})\/\*\n(?:\u0020|\u0020{5})\*((?:\u0020&lt;[^&gt;]*?&gt;|\u0020\.\.\.)*?)\n(?:\u0020|\u0020{5})\*\u0020
(will\u0020.*?\S)\n(?:\u0020|\u0020{5})\*\/\n(?:\u0020{4}|\u0020{8})\S/
        );
        textDict = {};
        Object.keys(local.cliDict).sort().forEach(function (key, ii) {
            if (key[0] === &quot;_&quot; &amp;&amp; key !== &quot;_default&quot;) {
                return;
            }
            text = String(local.cliDict[key]);
            if (key === &quot;_default&quot;) {
                key = &quot;&quot;;
            }
            textDict[text] = textDict[text] || (ii + 2);
            ii = textDict[text];
            if (commandList[ii]) {
                commandList[ii].command.push(key);
                return;
            }
            try {
                commandList[ii] = option.rgxComment.exec(text);
                commandList[ii] = {
                    argList: (commandList[ii][1] || &quot;&quot;).trim(),
                    command: [key],
                    description: commandList[ii][2]
                };
            } catch (ignore) {
                local.assertThrow(null, new Error(
                    &quot;cliRun - cannot parse comment in COMMAND &quot;
                    + key + &quot;:\nnew RegExp(&quot;
                    + JSON.stringify(option.rgxComment.source)
                    + &quot;).exec(&quot; + JSON.stringify(text)
                    .replace((
                        /\\\\/g
                    ), &quot;\u0000&quot;)
                    .replace((
                        /\\n/g
                    ), &quot;\\n\\\n&quot;)
                    .replace((
                        /\u0000/g
                    ), &quot;\\\\&quot;) + &quot;);&quot;
                ));
            }
        });
        text = &quot;&quot;;
        text += packageJson.name + &quot; (&quot; + packageJson.version + &quot;)\n\n&quot;;
        text += commandList
        .filter(function (element) {
            return element;
        })
        .map(function (element, ii) {
            element.command = element.command.filter(function (element) {
                return element;
            });
            switch (ii) {
            case 0:
            case 1:
                element.argList = [element.argList];
                break;
            default:
                element.argList = element.argList.split(&quot; &quot;);
                element.description = (
                    &quot;# COMMAND &quot;
                    + (element.command[0] || &quot;&lt;none&gt;&quot;) + &quot;\n# &quot;
                    + element.description
                );
            }
            return (
                el...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }, function (error) {
        process.exit(Boolean(error));
    });
};

// run cli
if (module === require.main &amp;&amp; !globalThis.utility2_rollup) {
    local.<span class="apidocCodeKeywordSpan">cliRun</span>();
}
}());



}());
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.functionOrNop" id="apidoc.element.github-crud.functionOrNop">
        function <span class="apidocSignatureSpan">github-crud.</span>functionOrNop
        <span class="apidocSignatureSpan">(fnc)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">functionOrNop = function (fnc) {
<span class="apidocCodeCommentSpan">/*
 * this function will if &lt;fnc&gt; exists,
 * them return &lt;fnc&gt;,
 * else return &lt;nop&gt;
 */
</span>    return fnc || local.nop;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
xhr.addEventListener(&quot;loadstart&quot;, ajaxProgressUpdate);
xhr.addEventListener(&quot;progress&quot;, ajaxProgressUpdate);
// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/upload
if (xhr.upload &amp;&amp; xhr.upload.addEventListener) {
    xhr.upload.addEventListener(&quot;progress&quot;, ajaxProgressUpdate);
}
// open url - corsForwardProxyHost
if (local.<span class="apidocCodeKeywordSpan">functionOrNop</span>(local2.corsForwardProxyHostIfNeeded)(xhr)) {
    xhr.open(xhr.method, local2.corsForwardProxyHostIfNeeded(xhr));
    xhr.setRequestHeader(
        &quot;forward-proxy-headers&quot;,
        JSON.stringify(xhr.headers)
    );
    xhr.setRequestHeader(&quot;forward-proxy-url&quot;, xhr.url);
// open url - default
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudAjax" id="apidoc.element.github-crud.githubCrudAjax">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudAjax
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudAjax = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will make a low-level content-request to github
 * https://developer.github.com/v3/repos/contents/
 */
</span>    // init option
    option = {
        content: option.content,
        headers: Object.assign({
            // github oauth authentication
            Authorization: &quot;token &quot; + (
                typeof process === &quot;object&quot; &amp;&amp; process &amp;&amp; process.env.GITHUB_TOKEN
            ),
            // bug-workaround - https://developer.github.com/v3/#user-agent-required
            &quot;User-Agent&quot;: &quot;undefined&quot;
        }, option.headers),
        httpRequest: option.httpRequest,
        message: option.message,
        method: option.method || &quot;GET&quot;,
        responseJson: {},
        sha: option.sha,
        url: option.url
    };
    option.url = option.url
/* jslint ignore:start */
// parse https://github.com/:owner/:repo/blob/:branch/:path
.replace(
    (/^https:\/\/github.com\/([^\/]+?\/[^\/]+?)\/blob\/([^\/]+?)\/(.+)/),
    &apos;https://api.github.com/repos/$1/contents/$3?branch=$2&apos;
)
// parse https://github.com/:owner/:repo/tree/:branch/:path
.replace(
    (/^https:\/\/github.com\/([^\/]+?\/[^\/]+?)\/tree\/([^\/]+?)\/(.+)/),
    &apos;https://api.github.com/repos/$1/contents/$3?branch=$2&apos;
)
// parse https://raw.githubusercontent.com/:owner/:repo/:branch/:path
.replace(
(/^https:\/\/raw.githubusercontent.com\/([^\/]+?\/[^\/]+?)\/([^\/]+?)\/(.+)/),
    &apos;https://api.github.com/repos/$1/contents/$3?branch=$2&apos;
)
// parse https://:owner.github.io/:repo/:path
.replace(
    (/^https:\/\/([^\.]+?)\.github\.io\/([^\/]+?)\/(.+)/),
    &apos;https://api.github.com/repos/$1/$2/contents/$3?branch=gh-pages&apos;
)
// parse :owner/:repo
.replace(
    (/^([^\/]+?\/[^\/]+?)$/),
    &apos;https://github.com/$1&apos;
)
/* jslint ignore:end */
    .replace((
        /\?branch=(.*)/
    ), function (match0, match1) {
        option.branch = match1;
        if (option.method === &quot;GET&quot;) {
            match0 = match0.replace(&quot;branch&quot;, &quot;ref&quot;);
        }
        return match0;
    });
    if ((
        /^https:\/\/github\.com\/[^\/]+?\/[^\/]+?$/
    ).test(option.url)) {
        option.data = JSON.stringify({
            name: option.url.split(&quot;/&quot;)[4]
        });
        switch (option.method) {
        case &quot;DELETE&quot;:
            option.url = (
                &quot;https://api.github.com/repos/&quot;
                + option.url.split(&quot;/&quot;).slice(3).join(&quot;/&quot;)
            );
            break;
        case &quot;POST_ORG&quot;:
            option.url = (
                &quot;https://api.github.com/orgs/&quot;
                + option.url.split(&quot;/&quot;)[3] + &quot;/repos&quot;
            );
            break;
        case &quot;POST_USER&quot;:
            option.url = &quot;https://api.github.com/user/repos&quot;;
            break;
        }
        option.method = option.method.split(&quot;_&quot;)[0];
    } else {
        if (option.url.indexOf(&quot;https://api.github.com/repos/&quot;) !== 0) {
            console.error(&quot;githubCrud - invalid url &quot; + option.url);
            onError(new Error(&quot;invalid url &quot; + option.url));
            return;
        }
        if (option.method !== &quot;GET&quot;) {
            option.message = (
                option.message
                || &quot;[ci skip] &quot; + option.method + &quot; file &quot;
                + option.url.replace((
                    /\?.*/
                ), &quot;&quot;)
            );
            option.url += &quot;&amp;message=&quot; + encodeURIComponent(option.message);
            if (option.sha) {
                option.url += &quot;&amp;sha=&quot; + option.sha;
            }
            option.data = JSON.stringify({
                branch: option.branch,
                content: Buffer.from(option.content || &quot;&quot;).toString(&quot;base64&quot;),
                message: option.me...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    message: option.message,
    url: option.url
};
local.onNext(option, function (error, data) {
    switch (option.modeNext) {
    case 1:
        // get sha
        local.<span class="apidocCodeKeywordSpan">githubCrudAjax</span>({
            httpRequest: option.httpRequest,
            url: option.url
        }, option.onNext);
        break;
    case 2:
        // delete file with sha
        if (!error &amp;&amp; data.sha) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudContentDelete" id="apidoc.element.github-crud.githubCrudContentDelete">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentDelete
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudContentDelete = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will delete github-file &lt;option&gt;.url
 * https://developer.github.com/v3/repos/contents/#delete-a-file
 */
</span>    option = {
        httpRequest: option.httpRequest,
        message: option.message,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get sha
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            // delete file with sha
            if (!error &amp;&amp; data.sha) {
                local.githubCrudAjax({
                    httpRequest: option.httpRequest,
                    message: option.message,
                    method: &quot;DELETE&quot;,
                    sha: data.sha,
                    url: option.url
                }, option.onNext);
                return;
            }
            // delete tree
            local.onParallelList({
                list: data
            }, function (option2, onParallel) {
                onParallel.counter += 1;
                // recurse
                local.githubCrudContentDelete({
                    httpRequest: option.httpRequest,
                    message: option.message,
                    url: option2.element.url
                }, onParallel);
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    // delete tree
    local.onParallelList({
        list: data
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        // recurse
        local.<span class="apidocCodeKeywordSpan">githubCrudContentDelete</span>({
            httpRequest: option.httpRequest,
            message: option.message,
            url: option2.element.url
        }, onParallel);
    }, option.onNext);
    break;
default:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudContentGet" id="apidoc.element.github-crud.githubCrudContentGet">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentGet
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudContentGet = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will get github-file &lt;option&gt;.url
 * https://developer.github.com/v3/repos/contents/#get-contents
 */
</span>    option = {
        httpRequest: option.httpRequest,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            option.onNext(null, Buffer.from(data.content || &quot;&quot;, &quot;base64&quot;));
            break;
        default:
            onError(error, !error &amp;&amp; data);
        }
    });
    option.modeNext = 0;
    option.onNext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

local.cliDict.get = function () {
/*
* &lt;fileRemote&gt;
* will get from github &lt;fileRemote&gt;
*/
   local.github_crud.<span class="apidocCodeKeywordSpan">githubCrudContentGet</span>({
       url: process.argv[3]
   }, function (error, data) {
       try {
           process.stdout.write(data);
       } catch (ignore) {}
       process.exit(Boolean(error));
   });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudContentPut" id="apidoc.element.github-crud.githubCrudContentPut">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentPut
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudContentPut = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will put &lt;option&gt;.content to github-file &lt;option&gt;.url
 * https://developer.github.com/v3/repos/contents/#create-a-file
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
</span>    option = {
        content: option.content,
        httpRequest: option.httpRequest,
        message: option.message,
        modeErrorIgnore: true,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get sha
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            // put file with sha
            local.githubCrudAjax({
                content: option.content,
                httpRequest: option.httpRequest,
                message: option.message,
                method: &quot;PUT&quot;,
                sha: data.sha,
                url: option.url
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        });
        return;
    }
    // get file
    local.fs.readFile(option.file, option.onNext);
    break;
case 2:
    local.<span class="apidocCodeKeywordSpan">githubCrudContentPut</span>({
        content: data,
        httpRequest: option.httpRequest,
        message: option.message,
        // resolve file in url
        url: (
            // ternary-condition
            (
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudContentPutFile" id="apidoc.element.github-crud.githubCrudContentPutFile">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentPutFile
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudContentPutFile = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will put option.file to github-file &lt;option&gt;.url
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
</span>    option = {
        file: option.file,
        httpRequest: option.httpRequest,
        message: option.message,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get file from url
            if ((
                /^(?:http|https):\/\//
            ).test(option.file)) {
                local.ajax({
                    httpRequest: option.httpRequest,
                    url: option.file
                }, function (error, response) {
                    option.onNext(error, response &amp;&amp; response.data);
                });
                return;
            }
            // get file
            local.fs.readFile(option.file, option.onNext);
            break;
        case 2:
            local.githubCrudContentPut({
                content: data,
                httpRequest: option.httpRequest,
                message: option.message,
                // resolve file in url
                url: (
                    // ternary-condition
                    (
                        /\/$/
                    ).test(option.url)
                    ? option.url + local.path.basename(option.file)
                    : option.url
                )
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

local.cliDict.put = function () {
/*
 * &lt;fileRemote&gt; &lt;fileLocal&gt; &lt;commitMessage&gt;
 * will put on github &lt;fileRemote&gt; to &lt;fileLocal&gt;
 */
    local.github_crud.<span class="apidocCodeKeywordSpan">githubCrudContentPutFile</span>({
        message: process.argv[5],
        url: process.argv[3],
        file: process.argv[4]
    }, function (error) {
        process.exit(Boolean(error));
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudContentTouch" id="apidoc.element.github-crud.githubCrudContentTouch">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentTouch
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudContentTouch = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will touch github-file &lt;option&gt;.url
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
</span>    option = {
        httpRequest: option.httpRequest,
        message: option.message,
        modeErrorIgnore: true,
        url: option.url
    };
    local.onNext(option, function (error, data) {
        switch (option.modeNext) {
        case 1:
            // get sha
            local.githubCrudAjax({
                httpRequest: option.httpRequest,
                url: option.url
            }, option.onNext);
            break;
        case 2:
            // put file with sha
            local.githubCrudAjax({
                content: Buffer.from(data.content || &quot;&quot;, &quot;base64&quot;),
                httpRequest: option.httpRequest,
                message: option.message,
                method: &quot;PUT&quot;,
                sha: data.sha,
                url: option.url
            }, option.onNext);
            break;
        default:
            onError(error, data);
        }
    });
    option.modeNext = 0;
    option.onNext();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * this function will touch github-files &lt;option&gt;.urlList in parallel
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.<span class="apidocCodeKeywordSpan">githubCrudContentTouch</span>({
            httpRequest: option.httpRequest,
            message: option.message,
            url: option2.element
        }, onParallel);
    }, onError);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudContentTouchList" id="apidoc.element.github-crud.githubCrudContentTouchList">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudContentTouchList
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudContentTouchList = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will touch github-files &lt;option&gt;.urlList in parallel
 * https://developer.github.com/v3/repos/contents/#update-a-file
 */
</span>    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.githubCrudContentTouch({
            httpRequest: option.httpRequest,
            message: option.message,
            url: option2.element
        }, onParallel);
    }, onError);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

local.cliDict.touch = function () {
/*
* &lt;fileRemoteList&gt; &lt;commitMessage&gt;
* will touch on github in parallel, comma-separated &lt;fileRemoteList&gt;
*/
   local.github_crud.<span class="apidocCodeKeywordSpan">githubCrudContentTouchList</span>({
       message: process.argv[4],
       urlList: process.argv[3].split(
           /[,\s]/g
       ).filter(local.identity)
   }, function (error) {
       process.exit(Boolean(error));
   });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudRepoCreate" id="apidoc.element.github-crud.githubCrudRepoCreate">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoCreate
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudRepoCreate = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will create github-repo &lt;option&gt;.url
 * https://developer.github.com/v3/repos/#create
 */
</span>    local.githubCrudAjax({
        httpRequest: option.httpRequest,
        method: &quot;POST_ORG&quot;,
        url: option.url
    }, function (error, data) {
        if (!(error &amp;&amp; error.statusCode === 404)) {
            onError(error, data);
            return;
        }
        local.githubCrudAjax({
            httpRequest: option.httpRequest,
            method: &quot;POST_USER&quot;,
            url: option.url
        }, onError);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * this function will create github-repos &lt;option&gt;.urlList in parallel
 * https://developer.github.com/v3/repos/#create
 */
    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.<span class="apidocCodeKeywordSpan">githubCrudRepoCreate</span>({
            httpRequest: option.httpRequest,
            url: option2.element
        }, onParallel);
    }, onError);
};

local.githubCrudRepoDelete = function (option, onError) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudRepoCreateList" id="apidoc.element.github-crud.githubCrudRepoCreateList">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoCreateList
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudRepoCreateList = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will create github-repos &lt;option&gt;.urlList in parallel
 * https://developer.github.com/v3/repos/#create
 */
</span>    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.githubCrudRepoCreate({
            httpRequest: option.httpRequest,
            url: option2.element
        }, onParallel);
    }, onError);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

local.cliDict.repo_create = function () {
/*
 * &lt;repoList&gt;
 * will create on github in parallel, comma-separated &lt;repoList&gt;
 */
    local.github_crud.<span class="apidocCodeKeywordSpan">githubCrudRepoCreateList</span>({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudRepoDelete" id="apidoc.element.github-crud.githubCrudRepoDelete">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoDelete
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudRepoDelete = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will delete github-repo &lt;option&gt;.url
 * https://developer.github.com/v3/repos/#delete-a-repository
 */
</span>    local.githubCrudAjax({
        httpRequest: option.httpRequest,
        method: &quot;DELETE&quot;,
        url: option.url
    }, onError);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * this function will delete github-repos &lt;option&gt;.urlList in parallel
 * https://developer.github.com/v3/repos/#delete-a-repository
 */
    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.<span class="apidocCodeKeywordSpan">githubCrudRepoDelete</span>({
            httpRequest: option.httpRequest,
            url: option2.element
        }, onParallel);
    }, onError);
};
}());
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.githubCrudRepoDeleteList" id="apidoc.element.github-crud.githubCrudRepoDeleteList">
        function <span class="apidocSignatureSpan">github-crud.</span>githubCrudRepoDeleteList
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">githubCrudRepoDeleteList = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will delete github-repos &lt;option&gt;.urlList in parallel
 * https://developer.github.com/v3/repos/#delete-a-repository
 */
</span>    local.onParallelList({
        list: option.urlList
    }, function (option2, onParallel) {
        onParallel.counter += 1;
        local.githubCrudRepoDelete({
            httpRequest: option.httpRequest,
            url: option2.element
        }, onParallel);
    }, onError);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

local.cliDict.repo_delete = function () {
/*
 * &lt;repoList&gt;
 * will delete from github in parallel, comma-separated &lt;repoList&gt;
 */
    local.github_crud.<span class="apidocCodeKeywordSpan">githubCrudRepoDeleteList</span>({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.identity" id="apidoc.element.github-crud.identity">
        function <span class="apidocSignatureSpan">github-crud.</span>identity
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">identity = function (value) {
<span class="apidocCodeCommentSpan">/*
 * this function will return &lt;value&gt;
 */
</span>    return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    local.isBrowser
    &amp;&amp; !option.httpRequest
    &amp;&amp; !(local2.serverLocalUrlTest &amp;&amp; local2.serverLocalUrlTest(option.url))
    &amp;&amp; new XMLHttpRequest()
);
// init xhr - http.request
if (!xhr) {
    xhr = local.<span class="apidocCodeKeywordSpan">identity</span>(local2.urlParse || require(&quot;url&quot;).parse)(
        option.url
    );
    // init xhr
    xhrInit();
    // init xhr - http.request
    xhr = local.identity(
        option.httpRequest
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.nop" id="apidoc.element.github-crud.nop">
        function <span class="apidocSignatureSpan">github-crud.</span>nop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nop = function () {
<span class="apidocCodeCommentSpan">/*
 * this function will do nothing
 */
</span>    return;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.objectAssignDefault" id="apidoc.element.github-crud.objectAssignDefault">
        function <span class="apidocSignatureSpan">github-crud.</span>objectAssignDefault
        <span class="apidocSignatureSpan">(target, source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">objectAssignDefault = function (target, source) {
<span class="apidocCodeCommentSpan">/*
 * this function will if items from &lt;target&gt; are
 * null, undefined, or empty-string,
 * then overwrite them with items from &lt;source&gt;
 */
</span>    Object.keys(source).forEach(function (key) {
        if (
            target[key] === null
            || target[key] === undefined
            || target[key] === &quot;&quot;
        ) {
            target[key] = target[key] || source[key];
        }
    });
    return target;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (key[0] !== &quot;_&quot;) {
        xhr[key] = option[key];
    }
});
// init timeout
timeout = xhr.timeout || local2.timeoutDefault || 30000;
// init defaults
local.<span class="apidocCodeKeywordSpan">objectAssignDefault</span>(xhr, {
    corsForwardProxyHost: local2.corsForwardProxyHost,
    headers: {},
    location: (local.isBrowser &amp;&amp; location) || {},
    method: &quot;GET&quot;,
    responseType: &quot;&quot;
});
// init headers
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.onErrorDefault" id="apidoc.element.github-crud.onErrorDefault">
        function <span class="apidocSignatureSpan">github-crud.</span>onErrorDefault
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onErrorDefault = function (error) {
<span class="apidocCodeCommentSpan">/*
 * this function will if &lt;error&gt; exists, then print it to stderr
 */
</span>    if (error) {
        console.error(error);
    }
    return error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            list: option.list,
            retry: 0
        }, onParallel);
    }
};
onParallel = local.onParallel(onError, onEach2, function (error, data) {
    if (error &amp;&amp; data &amp;&amp; data.retry &lt; option.retryLimit) {
        local.<span class="apidocCodeKeywordSpan">onErrorDefault</span>(error);
        data.retry += 1;
        setTimeout(function () {
            onParallel.counter -= 1;
            onEach(data, onParallel);
        }, 1000);
        return true;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.onErrorWithStack" id="apidoc.element.github-crud.onErrorWithStack">
        function <span class="apidocSignatureSpan">github-crud.</span>onErrorWithStack
        <span class="apidocSignatureSpan">(onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onErrorWithStack = function (onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will create a new callback that will call onError,
 * and append the current stack to any error
 */
</span>    var onError2;
    var stack;
    stack = new Error().stack.replace((
        /(.*?)\n.*?$/m
    ), &quot;$1&quot;);
    onError2 = function (error, data, meta) {
        if (
            error
            &amp;&amp; typeof error.stack === &quot;string&quot;
            &amp;&amp; error !== local.errorDefault
            &amp;&amp; String(error.stack).indexOf(stack.split(&quot;\n&quot;)[2]) &lt; 0
        ) {
            // append the current stack to error.stack
            error.stack += &quot;\n&quot; + stack;
        }
        onError(error, data, meta);
    };
    // debug onError
    onError2.toString = function () {
        return String(onError);
    };
    return onError2;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    local2._debugXhr = xhr;
    xhr.onEvent = onEvent;
    xhr.responseHeaders = {};
    xhr.timeStart = xhr.timeStart || Date.now();
};
// init onError
if (local2.onErrorWithStack) {
    onError = local2.<span class="apidocCodeKeywordSpan">onErrorWithStack</span>(onError);
}
// init xhr - XMLHttpRequest
xhr = (
    local.isBrowser
    &amp;&amp; !option.httpRequest
    &amp;&amp; !(local2.serverLocalUrlTest &amp;&amp; local2.serverLocalUrlTest(option.url))
    &amp;&amp; new XMLHttpRequest()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.onNext" id="apidoc.element.github-crud.onNext">
        function <span class="apidocSignatureSpan">github-crud.</span>onNext
        <span class="apidocSignatureSpan">(option, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onNext = function (option, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will wrap onError inside recursive-function &lt;option&gt;.onNext,
 * and append the current stack to any error
 */
</span>    option.onNext = local.onErrorWithStack(function (error, data, meta) {
        try {
            option.modeNext += (
                (error &amp;&amp; !option.modeErrorIgnore)
                ? 1000
                : 1
            );
            if (option.modeDebug) {
                console.error(&quot;onNext - &quot; + JSON.stringify({
                    modeNext: option.modeNext,
                    errorMessage: error &amp;&amp; error.message
                }));
                if (error &amp;&amp; error.stack) {
                    console.error(error.stack);
                }
            }
            onError(error, data, meta);
        } catch (errorCaught) {
            // throw errorCaught to break infinite recursion-loop
            if (option.errorCaught) {
                local.assertThrow(null, option.errorCaught);
            }
            option.errorCaught = errorCaught;
            option.onNext(errorCaught, data, meta);
        }
    });
    return option;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            onError(error, data, meta);
        } catch (errorCaught) {
            // throw errorCaught to break infinite recursion-loop
            if (option.errorCaught) {
                local.assertThrow(null, option.errorCaught);
            }
            option.errorCaught = errorCaught;
            option.<span class="apidocCodeKeywordSpan">onNext</span>(errorCaught, data, meta);
        }
    });
    return option;
};

local.onParallel = function (onError, onEach, onRetry) {
/*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.onParallel" id="apidoc.element.github-crud.onParallel">
        function <span class="apidocSignatureSpan">github-crud.</span>onParallel
        <span class="apidocSignatureSpan">(onError, onEach, onRetry)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onParallel = function (onError, onEach, onRetry) {
<span class="apidocCodeCommentSpan">/*
 * this function will create a function that will
 * 1. run async tasks in parallel
 * 2. if counter === 0 or error occurred, then call onError with error
 */
</span>    var onParallel;
    onError = local.onErrorWithStack(onError);
    onEach = onEach || local.nop;
    onRetry = onRetry || local.nop;
    onParallel = function (error, data) {
        if (onRetry(error, data)) {
            return;
        }
        // decrement counter
        onParallel.counter -= 1;
        // validate counter
        if (!(onParallel.counter &gt;= 0 || error || onParallel.error)) {
            error = new Error(
                &quot;invalid onParallel.counter = &quot; + onParallel.counter
            );
        // ensure onError is run only once
        } else if (onParallel.counter &lt; 0) {
            return;
        }
        // handle error
        if (error) {
            onParallel.error = error;
            // ensure counter &lt;= 0
            onParallel.counter = -Math.abs(onParallel.counter);
        }
        // call onError when isDone
        if (onParallel.counter &lt;= 0) {
            onError(error, data);
            return;
        }
        onEach();
    };
    // init counter
    onParallel.counter = 0;
    // return callback
    return onParallel;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            element: option.list[onParallel.ii],
            ii: onParallel.ii,
            list: option.list,
            retry: 0
        }, onParallel);
    }
};
onParallel = local.<span class="apidocCodeKeywordSpan">onParallel</span>(onError, onEach2, function (error, data) {
    if (error &amp;&amp; data &amp;&amp; data.retry &lt; option.retryLimit) {
        local.onErrorDefault(error);
        data.retry += 1;
        setTimeout(function () {
            onParallel.counter -= 1;
            onEach(data, onParallel);
        }, 1000);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.onParallelList" id="apidoc.element.github-crud.onParallelList">
        function <span class="apidocSignatureSpan">github-crud.</span>onParallelList
        <span class="apidocSignatureSpan">(option, onEach, onError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onParallelList = function (option, onEach, onError) {
<span class="apidocCodeCommentSpan">/*
 * this function will
 * 1. async-run onEach in parallel,
 *    with given option.rateLimit and option.retryLimit
 * 2. call onError when onParallel.ii + 1 === option.list.length
 */
</span>    var isListEnd;
    var onEach2;
    var onParallel;
    option.list = option.list || [];
    onEach2 = function () {
        while (true) {
            if (!(onParallel.ii + 1 &lt; option.list.length)) {
                isListEnd = true;
                return;
            }
            if (!(onParallel.counter &lt; option.rateLimit + 1)) {
                return;
            }
            onParallel.ii += 1;
            onEach({
                element: option.list[onParallel.ii],
                ii: onParallel.ii,
                list: option.list,
                retry: 0
            }, onParallel);
        }
    };
    onParallel = local.onParallel(onError, onEach2, function (error, data) {
        if (error &amp;&amp; data &amp;&amp; data.retry &lt; option.retryLimit) {
            local.onErrorDefault(error);
            data.retry += 1;
            setTimeout(function () {
                onParallel.counter -= 1;
                onEach(data, onParallel);
            }, 1000);
            return true;
        }
        // restart if option.list has grown
        if (isListEnd &amp;&amp; (onParallel.ii + 1 &lt; option.list.length)) {
            isListEnd = null;
            onEach2();
        }
    });
    onParallel.ii = -1;
    option.rateLimit = Number(option.rateLimit) || 6;
    option.rateLimit = Math.max(option.rateLimit, 1);
    option.retryLimit = Number(option.retryLimit) || 2;
    onParallel.counter += 1;
    onEach2();
    onParallel();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        method: &quot;DELETE&quot;,
        sha: data.sha,
        url: option.url
    }, option.onNext);
    return;
}
// delete tree
local.<span class="apidocCodeKeywordSpan">onParallelList</span>({
    list: data
}, function (option2, onParallel) {
    onParallel.counter += 1;
    // recurse
    local.githubCrudContentDelete({
        httpRequest: option.httpRequest,
        message: option.message,
...</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.github-crud.cliDict" id="apidoc.module.github-crud.cliDict">module github-crud.cliDict</a></h1>


    <h2>
        <a href="#apidoc.element.github-crud.cliDict.delete" id="apidoc.element.github-crud.cliDict.delete">
        function <span class="apidocSignatureSpan">github-crud.cliDict.</span>delete
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function () {
<span class="apidocCodeCommentSpan">/*
 * &lt;fileRemote|dirRemote&gt; &lt;commitMessage&gt;
 * will delete from github &lt;fileRemote|dirRemote&gt;
 */
</span>    local.github_crud.githubCrudContentDelete({
        message: process.argv[4],
        url: process.argv[3]
    }, function (error) {
        process.exit(Boolean(error));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.cliDict.get" id="apidoc.element.github-crud.cliDict.get">
        function <span class="apidocSignatureSpan">github-crud.cliDict.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {
<span class="apidocCodeCommentSpan">/*
 * &lt;fileRemote&gt;
 * will get from github &lt;fileRemote&gt;
 */
</span>    local.github_crud.githubCrudContentGet({
        url: process.argv[3]
    }, function (error, data) {
        try {
            process.stdout.write(data);
        } catch (ignore) {}
        process.exit(Boolean(error));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.cliDict.put" id="apidoc.element.github-crud.cliDict.put">
        function <span class="apidocSignatureSpan">github-crud.cliDict.</span>put
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">put = function () {
<span class="apidocCodeCommentSpan">/*
 * &lt;fileRemote&gt; &lt;fileLocal&gt; &lt;commitMessage&gt;
 * will put on github &lt;fileRemote&gt; to &lt;fileLocal&gt;
 */
</span>    local.github_crud.githubCrudContentPutFile({
        message: process.argv[5],
        url: process.argv[3],
        file: process.argv[4]
    }, function (error) {
        process.exit(Boolean(error));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.cliDict.repo_create" id="apidoc.element.github-crud.cliDict.repo_create">
        function <span class="apidocSignatureSpan">github-crud.cliDict.</span>repo_create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">repo_create = function () {
<span class="apidocCodeCommentSpan">/*
 * &lt;repoList&gt;
 * will create on github in parallel, comma-separated &lt;repoList&gt;
 */
</span>    local.github_crud.githubCrudRepoCreateList({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.cliDict.repo_delete" id="apidoc.element.github-crud.cliDict.repo_delete">
        function <span class="apidocSignatureSpan">github-crud.cliDict.</span>repo_delete
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">repo_delete = function () {
<span class="apidocCodeCommentSpan">/*
 * &lt;repoList&gt;
 * will delete from github in parallel, comma-separated &lt;repoList&gt;
 */
</span>    local.github_crud.githubCrudRepoDeleteList({
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.github-crud.cliDict.touch" id="apidoc.element.github-crud.cliDict.touch">
        function <span class="apidocSignatureSpan">github-crud.cliDict.</span>touch
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">touch = function () {
<span class="apidocCodeCommentSpan">/*
 * &lt;fileRemoteList&gt; &lt;commitMessage&gt;
 * will touch on github in parallel, comma-separated &lt;fileRemoteList&gt;
 */
</span>    local.github_crud.githubCrudContentTouchList({
        message: process.argv[4],
        urlList: process.argv[3].split(
            /[,\s]/g
        ).filter(local.identity)
    }, function (error) {
        process.exit(Boolean(error));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
